@using Microsoft.AspNetCore.Components.Authorization
@using Microsoft.AspNetCore.Components.WebAssembly.Authentication

@inject NavigationManager Navigation
@inject ILogger<LoginDisplay> Logger;

<AuthorizeView>

    <Authorized>

        <MudText Typo="Typo.body2">Hello, @context.User.Identity?.Name!</MudText>
        <MudDivider Vertical="true" FlexItem="true" Class="m-4" />
        <MudButton EndIcon="@Icons.Material.Filled.Logout" Color="Color.Inherit" IconColor="Color.Inherit" @onclick="BeginLogOut" title="Sign out" Disabled=@disabled Style="text-transform:none">Sign out</MudButton>

    </Authorized>

    <NotAuthorized>

        <MudButton EndIcon="@Icons.Material.Filled.Login" Color="Color.Inherit" IconColor="Color.Inherit" @onclick="BeginLogIn" title="Sign in" Disabled=@disabled Style="text-transform:none">Sign in</MudButton>

    </NotAuthorized>
</AuthorizeView>

@code{

    bool disabled = false;

    // [Inject] private CustomAuthService? CustomAuthService { get; set; }

    // [Inject] public ISecurityService? SecurityService { get; set; }

    public void BeginLogIn()
    {
        Navigation.NavigateToLogin("authentication/login");
    }

    public async Task BeginLogOut()
    {
        Navigation.NavigateToLogout("authentication/logout", "/");
    }
}
